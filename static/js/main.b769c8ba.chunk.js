(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{136:function(e,t,r){e.exports=r(168)},168:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(33),u=r.n(o),i=r(66),c=r(12),l=r(23),s=r(59),f=r(60),p=r(121),d=r(120),m=r(102),v=r(43),h=r(80),w=r.n(h),g=r(14),y=r.n(g),b=Object(f.a)(function e(t){Object(s.a)(this,e),this.root=void 0,this.repositories=[],this.pullRequests=[],this.reviewRequests=[],this.reviews=[],this.root=(t?t.root:void 0)||this});function E(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return q(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return q(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){i=!0,o=e},f:function(){try{u||null==r.return||r.return()}finally{if(i)throw o}}}}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function R(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(m.a)(e);if(t){var a=Object(m.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(d.a)(this,r)}}function x(){x=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",i=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(N){c=function(e,t,r){return e[t]=r}}function l(e,t,r,a){var o=t&&t.prototype instanceof p?t:p,u=Object.create(o.prototype),i=new O(a||[]);return n(u,"_invoke",{value:E(e,r,i)}),u}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(N){return{type:"throw",arg:N}}}e.wrap=l;var f={};function p(){}function d(){}function m(){}var v={};c(v,o,function(){return this});var h=Object.getPrototypeOf,w=h&&h(h(A([])));w&&w!==t&&r.call(w,o)&&(v=w);var g=m.prototype=p.prototype=Object.create(v);function y(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function b(e,t){var a;n(this,"_invoke",{value:function(n,o){function u(){return new t(function(a,u){!function n(a,o,u,i){var c=s(e[a],e,o);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then(function(e){n("next",e,u,i)},function(e){n("throw",e,u,i)}):t.resolve(f).then(function(e){l.value=e,u(l)},function(e){return n("throw",e,u,i)})}i(c.arg)}(n,o,a,u)})}return a=a?a.then(u,u):u()}})}function E(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return{value:void 0,done:!0}}for(r.method=a,r.arg=o;;){var u=r.delegate;if(u){var i=q(u,r);if(i){if(i===f)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=s(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function q(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,q(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var a=s(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,f;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function A(e){if(e||""===e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}throw new TypeError(typeof e+" is not iterable")}return d.prototype=m,n(g,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:d,configurable:!0}),d.displayName=c(m,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),c(b.prototype,u,function(){return this}),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var u=new b(l(t,r,n,a),o);return e.isGeneratorFunction(r)?u:u.next().then(function(e){return e.done?e.value:u.next()})},y(g),c(g,i,"Generator"),c(g,o,function(){return this}),c(g,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=A,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return u.type="throw",u.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var i=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(i&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var u=o?o.completion:{};return u.type=e,u.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(u)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;k(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:A(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}var k=w.a.parse(location.search),O="string"===typeof k.repo?[k.repo]:k.repo instanceof Array?k.repo:void 0,A=O instanceof Array?O.map(function(e){return"repo:".concat(e)}).join(" "):void 0,N=function(e,t){return Object(v.a)(x().mark(function r(){var n,a,o,u=arguments;return x().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(n="cache:".concat(e).concat(A?"?repo=".concat(A):""),!(a=localStorage.getItem(n))){r.next=8;break}return o=JSON.parse(a||"")||[],console.log("loaded ".concat(e,": ").concat(o.length)),r.abrupt("return",o);case 8:return r.next=10,t.apply(void 0,u);case 10:o=r.sent,localStorage.setItem(n,JSON.stringify(o)),console.log("discovered ".concat(e,": ").concat(o.length));case 13:return r.abrupt("return",o);case 14:case"end":return r.stop()}},r)}))},j=function(e){Object(p.a)(r,e);var t=R(r);function r(){var e;return Object(s.a)(this,r),(e=t.call(this)).token=void 0,e.needsReposSelected=function(){return!O||O.length<1},e.userOrgs=Object(v.a)(x().mark(function t(){var r;return x().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=function(e){return{name:e.login,id:e.id}},t.abrupt("return",e.queryAllPages("/user/orgs").then(function(e){return e.map(r)}));case 2:case"end":return t.stop()}},t)})),e.possibleRepositories=function(){var t=Object(v.a)(x().mark(function t(r){var n;return x().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=function(e){return{fullName:e.full_name,id:e.id}},t.abrupt("return",e.queryAllPages("/orgs/".concat(r,"/repos")).then(function(e){return e.map(n)}));case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),e.discoverRepositories=N("repositories",function(){var t=Object(v.a)(x().mark(function t(r){var n,a;return x().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=function(e){return{fullName:e.full_name,id:e.id}},!A){t.next=10;break}return r("querying repositories..."),t.next=5,e.query("/search/repositories?q=".concat(A)).then(function(e){return e.items.map(n)});case 5:return a=t.sent,r("found repositories: \n -".concat(a.map(function(e){return e.fullName}).join("\n -"))),t.abrupt("return",a);case 10:throw alert("please specify a `?repo=openstax/rex-web` query param. you can specify the param multiple times to load more than one repo"),new Error("please don't make me load everything....");case 12:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()),e.discoverPullRequests=N("pull-requests",function(){var t=Object(v.a)(x().mark(function t(r){var n,a,o,u,i,c,s;return x().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],a="is:pr ".concat(A," merged:>=").concat(y()().subtract(90,"days").format("YYYY-MM-DD")),o="is:pr is:open ".concat(A),r("querying prs with\n  merged prs: ".concat(a,"\n  open prs: ").concat(o,"\nloading...")),t.t0=[],t.t1=l.a,t.next=8,e.queryAllPages("/search/issues",{q:a});case 8:return t.t2=t.sent,t.t3=(0,t.t1)(t.t2),t.t4=l.a,t.next=13,e.queryAllPages("/search/issues",{q:o});case 13:t.t5=t.sent,t.t6=(0,t.t4)(t.t5),u=t.t0.concat.call(t.t0,t.t3,t.t6),i=E(u),t.prev=17,s=x().mark(function t(){var a,o,u;return x().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=c.value,t.prev=1,o=a.repository_url.replace(/.*\.com\/repos\//,""),!a.labels.find(function(e){return"release"===e.name})){t.next=6;break}return r("  skipping pr ".concat(o,"#").concat(a.number," because its labeled as a release")),t.abrupt("return",1);case 6:return r("  loading commits for pr ".concat(o,"#").concat(a.number,"...")),t.next=9,e.queryAllPages("/repos/".concat(o,"/pulls/").concat(a.number,"/commits"));case 9:u=t.sent,n.push({opener:a.user.login,commits:u.map(function(e){return{date:e.commit.committer.date}}),mergedAt:a.pull_request.merged_at,createdAt:a.created_at,title:a.title,repoFullName:o,repoId:e.repositories.find(function(e){return e.fullName==o}).id,id:a.number}),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(1),console.error(t.t0),r("[ERROR]: ".concat(t.t0.message));case 17:case"end":return t.stop()}},t,null,[[1,13]])}),i.s();case 20:if((c=i.n()).done){t.next=26;break}return t.delegateYield(s(),"t7",22);case 22:if(!t.t7){t.next=24;break}return t.abrupt("continue",24);case 24:t.next=20;break;case 26:t.next=31;break;case 28:t.prev=28,t.t8=t.catch(17),i.e(t.t8);case 31:return t.prev=31,i.f(),t.finish(31);case 34:return r("found ".concat(n.length," pull requests")),t.abrupt("return",n);case 36:case"end":return t.stop()}},t,null,[[17,28,31,34]])}));return function(e){return t.apply(this,arguments)}}()),e.discoverReviewRequests=N("review-requests",function(){var t=Object(v.a)(x().mark(function t(r){var n,a,o,u;return x().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=[],a=E(e.pullRequests),t.prev=2,u=x().mark(function t(){var a;return x().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=o.value,r("  loading review requests for pr ".concat(a.repoFullName,"#").concat(a.id,"...")),t.t0=n.push,t.t1=n,t.t2=l.a,t.next=7,e.queryAllPages("/repos/".concat(a.repoFullName,"/issues/").concat(a.id,"/events")).then(function(e){return e.filter(function(e){return"review_requested"===e.event&&e.requested_reviewer}).map(function(e){return{repoFullName:a.repoFullName,prTitle:a.title,prId:a.id,requestedReviewer:e.requested_reviewer.login,requestedAt:e.created_at}})});case 7:t.t3=t.sent,t.t4=(0,t.t2)(t.t3),t.t0.apply.call(t.t0,t.t1,t.t4);case 10:case"end":return t.stop()}},t)}),a.s();case 5:if((o=a.n()).done){t.next=9;break}return t.delegateYield(u(),"t0",7);case 7:t.next=5;break;case 9:t.next=14;break;case 11:t.prev=11,t.t1=t.catch(2),a.e(t.t1);case 14:return t.prev=14,a.f(),t.finish(14);case 17:return r("found ".concat(n.length," review requests")),t.abrupt("return",n);case 19:case"end":return t.stop()}},t,null,[[2,11,14,17]])}));return function(e){return t.apply(this,arguments)}}()),e.discoverReviews=N("reviews",function(){var t=Object(v.a)(x().mark(function t(r){var n,a,o,u;return x().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=[],a=E(e.pullRequests),t.prev=2,u=x().mark(function t(){var a;return x().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=o.value,r("  loading reviews for pr ".concat(a.repoFullName,"#").concat(a.id,"...")),t.t0=n.push,t.t1=n,t.t2=l.a,t.next=7,e.queryAllPages("/repos/".concat(a.repoFullName,"/pulls/").concat(a.id,"/reviews")).then(function(e){return e.map(function(e){return{repoFullName:a.repoFullName,prId:a.id,reviewer:e.user.login,reviewedAt:e.submitted_at,state:e.state}})});case 7:t.t3=t.sent,t.t4=(0,t.t2)(t.t3),t.t0.apply.call(t.t0,t.t1,t.t4);case 10:case"end":return t.stop()}},t)}),a.s();case 5:if((o=a.n()).done){t.next=9;break}return t.delegateYield(u(),"t0",7);case 7:t.next=5;break;case 9:t.next=14;break;case 11:t.prev=11,t.t1=t.catch(2),a.e(t.t1);case 14:return t.prev=14,a.f(),t.finish(14);case 17:return r("found ".concat(n.length," reviews")),t.abrupt("return",n);case 19:case"end":return t.stop()}},t,null,[[2,11,14,17]])}));return function(e){return t.apply(this,arguments)}}()),e}return Object(f.a)(r,[{key:"setToken",value:function(e){this.token=e}},{key:"load",value:function(){var e=Object(v.a)(x().mark(function e(t){return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.discoverRepositories(t);case 2:return this.repositories=e.sent,e.next=5,this.discoverPullRequests(t);case 5:return this.pullRequests=e.sent,e.next=8,this.discoverReviewRequests(t);case 8:return this.reviewRequests=e.sent,e.next=11,this.discoverReviews(t);case 11:this.reviews=e.sent;case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"queryAllPages",value:function(){var e=Object(v.a)(x().mark(function e(t){var r,n,a,o,u,c,s=arguments;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=s.length>1&&void 0!==s[1]?s[1]:{},n=[],a=100,o=1,u=[];case 5:return e.next=7,this.query(t,Object(i.a)({},r,{page:String(o++),per_page:String(a)}));case 7:c=e.sent,u="items"in c?c.items:c,n.push.apply(n,Object(l.a)(u));case 10:if(u.length===a){e.next=5;break}case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"query",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new URL("https://api.github.com".concat(e));return Object.keys(t).forEach(function(e){return r.searchParams.append(e,t[e])}),fetch(r.toString(),{headers:{Authorization:"token ".concat(this.token)}}).then(function(e){return e.json()})}}]),r}(b),F=r(256),I=r(171),S=r(249),_=r(118),L=r(248),C=r(250),P=r(246),T=r(240),M=r(233),B=r(238),D=r(237),Y=r(235),G=r(236),H=r(37),U=function(e,t){var r=e.root.reviews.filter(function(e){return e.prId===t.prId&&e.reviewer===t.reviewer&&y()(e.reviewedAt).isBefore(t.reviewedAt)}).sort(function(e){return y()(e.reviewedAt).unix()}).reverse()[0];return e.root.reviewRequests.filter(function(e){return e.prId===t.prId&&e.requestedReviewer===t.reviewer&&y()(e.requestedAt).isBefore(t.reviewedAt)&&(!r||y()(e.requestedAt).isAfter(r.reviewedAt))}).sort(function(e){return y()(e.reviewedAt).unix()}).reverse()[0]},z=function(e,t){return e.root.reviews.filter(function(e){return e.repoFullName===t.repoFullName&&e.prId===t.prId&&e.reviewer===t.reviewer&&y()(e.reviewedAt).isAfter(t.reviewedAt)}).sort(function(e){return y()(e.reviewedAt).unix()})[0]},W=function(e){return Object(H.uniq)(e.pullRequests.filter(function(e){return!!e.mergedAt}).map(function(e){return e.opener}))},J=function(e){var t=e.reviewRequests.map(function(e){return e.requestedReviewer}),r=e.reviews.map(function(e){return e.reviewer});return Object(H.uniq)(Object(H.intersection)(t,r))},V=function(e,t){return e.pullRequests.flatMap(function(e){return e.commits.map(function(e){return y()(e.date)})}).filter(function(e){return t.isSame(e,"day")}).length},$=function(e,t){return e.pullRequests.filter(function(e){return e.mergedAt?t.isBetween(y()(e.commits[0].date).startOf("day"),y()(e.mergedAt).endOf("day")):t.isAfter(y()(e.commits[0].date).startOf("day"))})},K=function(e,t){var r=new b(e);return r.reviewRequests=e.reviewRequests.filter(function(e){return e.requestedReviewer===t}),r.reviews=e.reviews.filter(function(e){return e.reviewer===t}),r.pullRequests=e.pullRequests.filter(function(e){return!!r.reviews.find(function(t){var r=t.repoFullName,n=t.prId;return r===e.repoFullName&&n===e.id})}),r.repositories=e.repositories.filter(function(e){var t=e.id;return!!r.pullRequests.find(function(e){return e.repoId===t})}),r},Q=function(e,t,r){var n=new b(e);return n.reviewRequests=e.reviewRequests.filter(function(e){var n=e.requestedAt;return y()(n).isBetween(t,r)}),n.reviews=e.reviews.filter(function(t){var r=U(e,t);return r&&n.reviewRequests.indexOf(r)>-1}),n.pullRequests=e.pullRequests.filter(function(e){return!!n.reviews.find(function(t){var r=t.repoFullName,n=t.prId;return r===e.repoFullName&&n===e.id})}),n.repositories=e.repositories.filter(function(e){var t=e.id;return!!n.pullRequests.find(function(e){return e.repoId===t})}),n},X=function(e,t){var r=new b(e);return r.pullRequests=e.pullRequests.filter(function(e){return e.opener===t}),r.repositories=e.repositories.filter(function(e){var t=e.id;return!!r.pullRequests.find(function(e){return e.repoId===t})}),r.reviews=e.reviews.filter(function(e){var t=e.prId,n=e.repoFullName;return!!r.pullRequests.find(function(e){return n===e.repoFullName&&t===e.id})}),r.reviewRequests=e.reviewRequests.filter(function(e){var t=e.prId,n=e.repoFullName;return!!r.pullRequests.find(function(e){return n===e.repoFullName&&t===e.id})}),r},Z=function(e,t){var r=new b(e);return r.pullRequests=e.pullRequests.filter(function(e){var r=e.opener;return!!e.mergedAt&&r===t}),r.repositories=e.repositories.filter(function(e){var t=e.id;return!!r.pullRequests.find(function(e){return e.repoId===t})}),r.reviews=e.reviews.filter(function(e){var t=e.prId,n=e.repoFullName;return!!r.pullRequests.find(function(e){return n===e.repoFullName&&t===e.id})}),r.reviewRequests=e.reviewRequests.filter(function(e){var t=e.prId,n=e.repoFullName;return!!r.pullRequests.find(function(e){return n===e.repoFullName&&t===e.id})}),r},ee=function(e,t,r){var n=new b(e);return n.pullRequests=e.pullRequests.filter(function(e){var n=e.createdAt;return y()(n).isBetween(t,r)}),n.repositories=e.repositories.filter(function(e){var t=e.id;return!!n.pullRequests.find(function(e){return e.repoId===t})}),n.reviews=e.reviews.filter(function(e){var t=e.prId,r=e.repoFullName;return!!n.pullRequests.find(function(e){return r===e.repoFullName&&t===e.id})}),n.reviewRequests=e.reviewRequests.filter(function(e){var t=e.prId,r=e.repoFullName;return!!n.pullRequests.find(function(e){return r===e.repoFullName&&t===e.id})}),n},te=function(e,t,r){var n=new b(e);return n.pullRequests=e.pullRequests.filter(function(e){var n=e.mergedAt;return n&&y()(n).isBetween(t,r)}),n.repositories=e.repositories.filter(function(e){var t=e.id;return!!n.pullRequests.find(function(e){return e.repoId===t})}),n.reviews=e.reviews.filter(function(e){var t=e.prId,r=e.repoFullName;return!!n.pullRequests.find(function(e){return r===e.repoFullName&&t===e.id})}),n.reviewRequests=e.reviewRequests.filter(function(e){var t=e.prId,r=e.repoFullName;return!!n.pullRequests.find(function(e){return r===e.repoFullName&&t===e.id})}),n},re=function(e){if(!e)return"";var t=e.asMinutes();return isNaN(t)?null:t>=480?"".concat((t/480).toLocaleString()," days"):t>60?"".concat((t/60).toLocaleString()," hours"):"".concat(t.toLocaleString()," minutes")},ne=r(47),ae=Object(ne.extendMoment)(y.a),oe=[{start:{hour:0,minute:0,second:0},end:{hour:0,minute:0,second:0}},{start:{hour:9,minute:0,second:0},end:{hour:17,minute:0,second:0}},{start:{hour:9,minute:0,second:0},end:{hour:17,minute:0,second:0}},{start:{hour:9,minute:0,second:0},end:{hour:17,minute:0,second:0}},{start:{hour:9,minute:0,second:0},end:{hour:17,minute:0,second:0}},{start:{hour:9,minute:0,second:0},end:{hour:17,minute:0,second:0}},{start:{hour:0,minute:0,second:0},end:{hour:0,minute:0,second:0}}],ue=function(e){for(var t=0,r=0,n=Array.from(e.clone().snapTo("day").by("day"));r<n.length;r++){var a=n[r],o=oe[a.day()],u=o.start,i=o.end,c=a.clone().set(u),l=a.clone().set(i),s=ae.max(c,e.start),f=ae.min(l,e.end);s<f&&(t+=f.diff(s))}return ae.duration(t)};function ie(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return ce(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ce(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){i=!0,o=e},f:function(){try{u||null==r.return||r.return()}finally{if(i)throw o}}}}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var le=Object(ne.extendMoment)(y.a),se=function(e,t){var r=U(e,t);if(r){var n=le.range(le(r.requestedAt),le(t.reviewedAt));return ue(n)}return null},fe=function(e,t){var r=e.pullRequests.find(function(e){return t.repoFullName===e.repoFullName&&t.prId===e.id});if(!r||r.opener===t.reviewer)return null;var n=function(e,t){var r=z(e,t);return e.root.reviewRequests.filter(function(e){return e.repoFullName===t.repoFullName&&e.prId===t.prId&&e.requestedReviewer===t.reviewer&&y()(e.requestedAt).isAfter(t.reviewedAt)&&(!r||y()(e.requestedAt).isBefore(r.reviewedAt))}).sort(function(e){return y()(e.reviewedAt).unix()})[0]}(e,t),a=z(e,t);if(a){var o=le.range(le(t.reviewedAt),le(a.reviewedAt));return ue(o)}if(n){var u=le.range(le(t.reviewedAt),le(n.requestedAt));return ue(u)}return null},pe=r(114),de=r.n(pe),me=r(239),ve=function(e){var t=e.segment,r=e.onDone;return a.a.createElement(a.a.Fragment,null,a.a.createElement(M.a,null,a.a.createElement(Y.a,null,a.a.createElement(G.a,null,a.a.createElement(D.a,null,"created"),a.a.createElement(D.a,null,"reviewer"),a.a.createElement(D.a,null,"lead time"),a.a.createElement(D.a,null,"rework time"))),a.a.createElement(B.a,null,t.reviews.map(function(e){return a.a.createElement(G.a,{key:"".concat(e.prId," ").concat(e.reviewedAt)},a.a.createElement(D.a,null,e.reviewedAt),a.a.createElement(D.a,null,e.reviewer),a.a.createElement(D.a,null,re(se(t,e))),a.a.createElement(D.a,null,re(fe(t,e))))}))),r?a.a.createElement(me.a,{onClick:r},"back"):null)},he=function e(t){var r=t.segment,n=t.onDone,o=Ee();return a.a.createElement(a.a.Fragment,null,a.a.createElement(M.a,null,a.a.createElement(Y.a,null,a.a.createElement(G.a,null,a.a.createElement(D.a,null,"title"),a.a.createElement(D.a,null,"time to merge"),a.a.createElement(D.a,null,"total time waiting for review"),a.a.createElement(D.a,null,"total rework time"),a.a.createElement(D.a,null,"created"))),a.a.createElement(B.a,null,r.pullRequests.map(function(n){var u=function(e,t){var r=new b(e);return r.pullRequests=e.pullRequests.filter(function(e){return e===t}),r.repositories=e.repositories.filter(function(e){var t=e.id;return!!r.pullRequests.find(function(e){return e.repoId===t})}),r.reviews=e.reviews.filter(function(e){var t=e.prId,n=e.repoFullName;return!!r.pullRequests.find(function(e){return n===e.repoFullName&&t===e.id})}),r.reviewRequests=e.reviewRequests.filter(function(e){var t=e.prId,n=e.repoFullName;return!!r.pullRequests.find(function(e){return n===e.repoFullName&&t===e.id})}),r}(r,n);return a.a.createElement(G.a,{key:"".concat(n.repoId," ").concat(n.id)},a.a.createElement(D.a,null,a.a.createElement(T.a,{component:"button",onClick:function(r){o({component:ve,props:{segment:u,onDone:function(){return o({component:e,props:t})}}})}},n.title),a.a.createElement(T.a,{href:"https://github.com/".concat(n.repoFullName,"/pull/").concat(n.id)},a.a.createElement(de.a,{fontSize:"small"}))),a.a.createElement(D.a,null,re(function(e){var t=le.range(le(e.commits[0].date),le(e.mergedAt));return le.duration(ue(t).asMilliseconds())}(n))),a.a.createElement(D.a,null,re(function(e){var t,r=[],n=ie(e.reviews);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=se(e,a);o&&r.push(o.asMilliseconds())}}catch(u){n.e(u)}finally{n.f()}return le.duration(Object(H.sum)(r))}(u))),a.a.createElement(D.a,null,re(function(e){var t,r=[],n=ie(e.reviews);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=fe(e,a);o&&r.push(o.asMilliseconds())}}catch(u){n.e(u)}finally{n.f()}return le.duration(Object(H.sum)(r))}(u))),a.a.createElement(D.a,null,n.createdAt))}))),n?a.a.createElement(me.a,{onClick:n},"back"):null)},we=he,ge=Object(ne.extendMoment)(y.a),ye=function e(t){var r=t.segment,n=t.onDone,o=Ee();return a.a.createElement(a.a.Fragment,null,a.a.createElement(M.a,null,a.a.createElement(Y.a,null,a.a.createElement(G.a,null,a.a.createElement(D.a,null,"date"),a.a.createElement(D.a,null,"commits"),a.a.createElement(D.a,null,"prs"))),a.a.createElement(B.a,null,Array.from(ge.range(t.start,t.end).by("day")).map(function(n){var u=function(e,t){var r=new b(e);return r.pullRequests=$(e,t),r.repositories=e.repositories.filter(function(e){var t=e.id;return!!r.pullRequests.find(function(e){return e.repoId===t})}),r.reviews=e.reviews.filter(function(e){var t=e.prId,n=e.repoFullName;return!!r.pullRequests.find(function(e){return n===e.repoFullName&&t===e.id})}),r.reviewRequests=e.reviewRequests.filter(function(e){var t=e.prId,n=e.repoFullName;return!!r.pullRequests.find(function(e){return n===e.repoFullName&&t===e.id})}),r}(r,n);return a.a.createElement(G.a,{key:"".concat(n.format())},a.a.createElement(D.a,null,a.a.createElement(T.a,{component:"button",onClick:function(r){o({component:he,props:{segment:u,onDone:function(){return o({component:e,props:t})}}})}},n.format("dddd, MMM, Do, YY"))),a.a.createElement(D.a,null,V(r,n)),a.a.createElement(D.a,null,$(r,n).length))}))),n?a.a.createElement(me.a,{onClick:n},"back"):null)},be=a.a.createContext(function(){throw new Error("not implemented")}),Ee=function(){return a.a.useContext(be)},qe=function(e){var t=Ee();return a.a.createElement(D.a,null,a.a.createElement(T.a,{component:"button",onClick:function(r){r.preventDefault(),t({component:e.detail,props:{segment:e.segment,onDone:function(){return t(void 0)}}})}},e.text(e.segment)||"-"))},Re=function(e){return a.a.createElement(G.a,null,a.a.createElement(qe,{segment:e.segment,detail:e.detail,text:function(){return e.rowHeader}}),a.a.createElement(qe,{segment:e.filter(e.segment,y()().subtract(30,"days"),y()()),detail:function(t){return a.a.createElement(e.detail,Object.assign({},t,{start:y()().subtract(30,"days"),end:y()()}))},text:function(t){return e.text(t,y()().subtract(30,"days"),y()())}}),a.a.createElement(qe,{segment:e.filter(e.segment,y()().subtract(60,"days"),y()().subtract(30,"days")),detail:function(t){return a.a.createElement(e.detail,Object.assign({},t,{start:y()().subtract(60,"days"),end:y()().subtract(30,"days")}))},text:function(t){return e.text(t,y()().subtract(60,"days"),y()().subtract(30,"days"))}}),a.a.createElement(qe,{segment:e.filter(e.segment,y()().subtract(90,"days"),y()().subtract(60,"days")),detail:function(t){return a.a.createElement(e.detail,Object.assign({},t,{start:y()().subtract(90,"days"),end:y()().subtract(60,"days")}))},text:function(t){return e.text(t,y()().subtract(90,"days"),y()().subtract(60,"days"))}}))},xe=function(e){var t=a.a.useState(),r=Object(c.a)(t,2),n=r[0],o=r[1];return a.a.createElement(be.Provider,{value:o},n?a.a.createElement(a.a.Fragment,null,a.a.createElement(n.component,n.props)):a.a.createElement(M.a,null,a.a.createElement(Y.a,null,a.a.createElement(G.a,null,a.a.createElement(D.a,null),a.a.createElement(D.a,null,"past 30 days"),a.a.createElement(D.a,null,"30 - 60 days"),a.a.createElement(D.a,null,"60 - 90 days"))),a.a.createElement(B.a,null,a.a.createElement(Re,{rowHeader:"",segment:e.segment,detail:e.detail,filter:e.dateFilter,text:e.text}),e.rows(e.segment).map(function(t){return a.a.createElement(Re,{key:t,rowHeader:t,segment:e.rowFilter(e.segment,t),detail:e.detail,filter:e.dateFilter,text:e.text})}))))},ke=function(e){var t=e.data,r=He();return a.a.createElement(a.a.Fragment,null,a.a.createElement(P.a,{className:r.main},a.a.createElement(I.a,{variant:"h3",gutterBottom:!0},"time to respond to review requests"),a.a.createElement(I.a,{variant:"caption",gutterBottom:!0},"when a review is requested from somebody, how long does it take them to respond? this metric only counts time during work hours monday through friday."),a.a.createElement(xe,{segment:t,detail:we,rows:J,rowFilter:K,dateFilter:Q,text:function(e){return re(function(e){var t,r=[],n=ie(e.reviews);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=se(e,a);o&&r.push(o.asMilliseconds())}}catch(u){n.e(u)}finally{n.f()}return le.duration(Object(H.mean)(r))}(e))}})),a.a.createElement(P.a,{className:r.main},a.a.createElement(I.a,{variant:"h3",gutterBottom:!0},"time to rework after review"),a.a.createElement(I.a,{variant:"caption",gutterBottom:!0},"how long does it take the PR owner to re-work and re-request review after receiving feedback? this metric only counts time during work hours monday through friday."),a.a.createElement(xe,{segment:t,detail:we,rows:W,rowFilter:Z,dateFilter:Q,text:function(e){return re(function(e){var t,r=[],n=ie(e.reviews);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=fe(e,a);o&&r.push(o.asMilliseconds())}}catch(u){n.e(u)}finally{n.f()}return le.duration(Object(H.mean)(r))}(e))}})),a.a.createElement(P.a,{className:r.main},a.a.createElement(I.a,{variant:"h3",gutterBottom:!0},"time to merge pull requests"),a.a.createElement(I.a,{variant:"caption",gutterBottom:!0},"when somebody opens a pull request, how long is it between the first commit on the pull request and when it is merged? this metric only counts time during work hours monday through friday."),a.a.createElement(xe,{segment:t,detail:we,rows:W,rowFilter:Z,dateFilter:ee,text:function(e){return re(function(e){var t,r=[],n=ie(e.pullRequests);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a.mergedAt){var o=le.range(le(a.commits[0].date),le(a.mergedAt));r.push(ue(o).asMilliseconds())}}}catch(u){n.e(u)}finally{n.f()}return le.duration(Object(H.mean)(r))}(e))}})),a.a.createElement(P.a,{className:r.main},a.a.createElement(I.a,{variant:"h3",gutterBottom:!0},"weekly pull requests merged"),a.a.createElement(I.a,{variant:"caption",gutterBottom:!0},"the average number of pull requests merged each week"),a.a.createElement(xe,{segment:t,detail:we,rows:W,rowFilter:Z,dateFilter:te,text:function(e,t,r){return function(e,t,r){for(var n=e.pullRequests.flatMap(function(e){return e.commits.map(function(e){return le(e.date)})}),a=le.range(t||le.min(n),r||le.max(n)),o=[],u=function(){var t=c[i],r=le.range(t.clone().startOf("week"),t.clone().endOf("week"));o.push(e.pullRequests.filter(function(e){return e.mergedAt&&r.contains(le(e.mergedAt))}).length)},i=0,c=Array.from(a.by("week"));i<c.length;i++)u();return Object(H.mean)(o)}(e,t,r).toLocaleString()}})),a.a.createElement(P.a,{className:r.main},a.a.createElement(I.a,{variant:"h3",gutterBottom:!0},"weekly coding days"),a.a.createElement(I.a,{variant:"caption",gutterBottom:!0},"the average number of days per week that have at least one commit on a pull request"),a.a.createElement(xe,{segment:t,detail:ye,rows:W,rowFilter:X,dateFilter:function(e){return e},text:function(e,t,r){return function(e,t,r){for(var n=e.pullRequests.flatMap(function(e){return e.commits.map(function(e){return le(e.date)})}),a=le.range(t||le.min(n),r||le.max(n)),o=[],u=0,i=Array.from(a.by("week"));u<i.length;u++){for(var c=i[u],l=[],s=0,f=0,p=Array.from(le.range(c.clone().startOf("week"),c.clone().endOf("week")).by("day"));f<p.length;f++){var d=p[f],m=V(e,d);m>0&&(l.push({day:d,count:m}),s++)}o.push(s)}return Object(H.mean)(o)}(e,t,r).toLocaleString()}})),a.a.createElement(P.a,{className:r.main},a.a.createElement(I.a,{variant:"h3",gutterBottom:!0},"work in progress"),a.a.createElement(I.a,{variant:"caption",gutterBottom:!0},"the average number of in progress pull requests on any given day"),a.a.createElement(xe,{segment:t,detail:ye,rows:W,rowFilter:X,dateFilter:function(e){return e},text:function(e,t,r){return function(e,t,r){for(var n=e.pullRequests.flatMap(function(e){return e.commits.map(function(e){return le(e.date)})}),a=le.range(t||le.min(n),r||le.max(n)),o=[],u=0,i=Array.from(a.by("day"));u<i.length;u++){var c=i[u];o.push($(e,c).length)}return Object(H.mean)(o)}(e,t,r).toLocaleString()}})))},Oe=r(262),Ae=r(260),Ne=r(258),je=r(264),Fe=r(252),Ie=r(253),Se=r(255),_e=r(263),Le=r(251),Ce=r(257),Pe=function(e){var t=e.data,r=a.a.useState([]),n=Object(c.a)(r,2),o=n[0],u=n[1],i=a.a.useState([]),s=Object(c.a)(i,2),f=s[0],p=s[1],d=a.a.useState(""),m=Object(c.a)(d,2),v=m[0],h=m[1],w=a.a.useState(null),g=Object(c.a)(w,2),y=g[0],b=g[1],E=a.a.useState(""),q=Object(c.a)(E,2),R=q[0],x=q[1];return a.a.useEffect(function(){t.userOrgs().then(function(e){h(e[0].name),p(e)})},[]),a.a.useEffect(function(){v&&(x(""),b(null),t.possibleRepositories(v).then(b))},[v]),a.a.createElement(Oe.a,{component:"form",noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault();var t=new URLSearchParams(window.location.search);t.delete("repo"),o.forEach(function(e){return t.append("repo",e)}),window.location.search=t.toString()},sx:{maxWidth:"500px","& > :not(style)":{m:1,width:"100%"}}},a.a.createElement(_e.a,{fullWidth:!0},a.a.createElement(Ce.a,null,"Organization"),a.a.createElement(Le.a,{label:"Organization",value:f.find(function(e){return e.name==v})?v:"",onChange:function(e){return h(e.target.value)}},f.map(function(e){return a.a.createElement(Se.a,{key:e.name,value:e.name},e.name)}))),a.a.createElement(Ne.a,{label:"Search",variant:"outlined",value:R,onChange:function(e){return x(e.target.value)}}),a.a.createElement(je.a,null,o.map(function(e){return a.a.createElement(Fe.a,{key:e,control:a.a.createElement(Ie.a,{checked:!0,onChange:function(){return u(function(t){return t.filter(function(t){return t!==e})})}}),label:e})}),o.length<1?a.a.createElement(I.a,null,"Select some repos"):null,a.a.createElement(Ae.a,{variant:"outlined",type:"submit"},"View Metrics")),a.a.createElement(je.a,null,y?y.filter(function(e){return e.fullName.includes(R)&&!o.includes(e.fullName)}).map(function(e){return a.a.createElement(Fe.a,{key:e.fullName,control:a.a.createElement(Ie.a,{checked:!1,onChange:function(){return u(function(t){return[].concat(Object(l.a)(t),[e.fullName])})}}),label:e.fullName})}):a.a.createElement(I.a,null,"loading repos...")))},Te=w.a.parse(window.location.search),Me=Object(_.a)(),Be=Object({NODE_ENV:"production",PUBLIC_URL:"/GithubMetrics",REACT_APP_CLIENT_ID:"18aa2b6ad64d1f1a3ce6",REACT_APP_REDIRECT_URI:"https://TomWoodward.github.io/GithubMetrics/",REACT_APP_ACCESS_TOKEN_HOST:"https://tcwoodward-github-metrics.herokuapp.com"}),De=Be.REACT_APP_CLIENT_ID,Ye=Be.REACT_APP_REDIRECT_URI,Ge=Be.REACT_APP_ACCESS_TOKEN_HOST,He=Object(L.a)(function(e){return{repoChip:{margin:e.spacing(.25)},container:{margin:e.spacing(2)},main:{marginTop:e.spacing(4),padding:e.spacing(4)}}}),Ue=function(){var e=a.a.useState({phase:null}),t=Object(c.a)(e,2),r=t[0],n=t[1],o=a.a.useState(""),u=Object(c.a)(o,2),l=u[0],s=u[1],f=a.a.useRef(new j),p=He(),d=a.a.useCallback(function(){s(""),f.current.load(function(e){return s(function(t){return t+"\n"+e})}).then(function(){return n(function(e){return Object(i.a)({},e,{phase:"loaded"})})})},[n]),m=a.a.useCallback(function(e){localStorage.setItem("token",e),n(function(t){return Object(i.a)({},t,{token:e,phase:f.current.needsReposSelected()?"repo-select":"loading"})}),f.current.setToken(e),f.current.needsReposSelected()||d()},[n,d]),v=a.a.useCallback(function(e){fetch("".concat(Ge,"/authenticate/").concat(e)).then(function(e){return e.json()}).then(function(e){var t=e.token;return m(t)})},[m]);a.a.useCallback(function(e){n(function(t){return Object(i.a)({},t,{view:e})})},[n]);return a.a.useEffect(function(){var e=localStorage.getItem("token");if(e)m(e);else if(Te.code&&"string"===typeof Te.code)v(Te.code);else{var t=encodeURIComponent(Ye+window.location.search);window.location.replace("https://github.com/login/oauth/authorize?client_id=".concat(De,"&scope=user,read,repo&redirect_uri=").concat(t))}},[m,v]),a.a.useEffect(function(){"loading"===r.phase&&window.innerHeight+window.pageYOffset>=document.body.offsetHeight-30&&window.scrollTo(0,document.body.offsetHeight)},[r,l]),"loading"===r.phase?a.a.createElement("pre",null,l,"\n..."):a.a.createElement("div",{className:p.container},a.a.createElement(S.a,null),a.a.createElement(I.a,{variant:"h1"},"GitHub Metrics"),f.current.repositories.map(function(e){var t=e.fullName;return a.a.createElement(F.a,{className:p.repoChip,key:t,label:t,variant:"outlined"})}),"loaded"===r.phase?a.a.createElement(ke,{data:f.current}):"repo-select"===r.phase?a.a.createElement(Pe,{data:f.current}):null)},ze=function(){return a.a.createElement(C.a,{theme:Me},a.a.createElement(Ue,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(a.a.createElement(ze,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[136,1,2]]]);
//# sourceMappingURL=main.b769c8ba.chunk.js.map